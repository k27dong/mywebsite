---
title: 从零搭建博客 (Ongoing)
abbrlink: 41986
date: 2020-07-27 17:36:35
---

技术栈：

> React (前端框架)
>
> Python (后端API)
>
> Nginx (WEB服务器，链接前端与WSGI服务器)
>
> uWSGI (网关，链接服务器与后端)
>
> Docker (容器化)
>
> Google Cloud Platform (云端服务器)
>
> Kubernetes (管理容器化的app，负载，和服务；自动化部署容器)
>
> Google Domains (购买域名)

<br>

----

<br>

### 前言

在把这个网站真正搭起来之前，其实我也有过专门写博客的网站。但是构建的过程几乎没有涉及到任何开发方面的知识，源代码用的是hexo框架，服务器用的是github为每个账号都提供的 github.io。在godaddy上买了个域名，看着别人写的教程照猫画虎就搭起来了。用起来没有什么问题，自己调整了一些配置之后也比较满意。但是毕竟不能算自己写的网站，也无法知道开发过程中的各种细节和原理，于是借着这次实习的空隙，花了几周时间认真研究了一下，重写了所有代码和服务，总算是真正有了自己的网站。写这篇文章也是想根据折腾的过程，来总结和简化一下开发的过程。如果有想做类似事情的同学看到这篇文章，也能少走一些弯路。虽然涉及了不少方面的知识，但是架构服务依旧是一门深不见底的学问，我也只是略微学懂了一些表面上的东西，想必写出来的过程依旧有众多可以继续优化的地方，感谢各位对其中的纰漏和不足提出意见。

在写细节之前，我们需要对整个网站的结构做一下描述。任何网站都分为前端和后端，前端决定了用户看到的界面是什么样子的，后端则是为前端提供需要渲染出来的信息。拿kefan.me举例，网站打开之后，前端需要知道我写了哪些文章，于是向后端发送一个请求。后端接到这个请求之后开始处理，然后再把博客的列表返回前端，这时候前端知道了这些信息，于是把他们渲染到特定的位置。这也是典型的前后端分离的逻辑，个人来说也是比较符合直觉的一种设计。前端只负责网站看起来是怎么样的，后端提供的也只有一个api的借口，作为处理请求和数据的工具人。当然，在具体操作的时候，在前后端中间还要添加两个中间层，一个是nginx，一个是uWSGI。后者把api运行在一个端口上，而前者则监听来自前端的请求，如果有朝后端发射的请求，则把请求的内容发送到后端的端口上。目前这两个过程听起来还比较抽象，等我们实际进行到那一步的时候会比较清楚一点。

在这些步骤都完成之后，这个网站应该已经可以在本地运行起来了，下一步就是把它部署到一个服务器上。这里我选择的是Google Cloud Platform (GCP)，服务器的选择其实并没有太大的区别，目前主流的几家平台（Microsoft Azure, Amazon AWS, Google Cloud Platform）都可以提供足够的服务，选择谷歌只是因为我比较熟悉，而且和kubernetes配合的比较好，价格也比较便宜。当进行到这一步的时候，在任何设备的浏览器上输入谷歌提供的ip就可以看到网站了（格式大概为 http://xx.xx.xxx.xxx ）。最后一步要做的就是把这个ip地址和购买的域名连接起来。对于我来说前端和后端写起来都比较轻松，虽然代码数量比较多，但是起码知道怎么写，而且任何问题都可以在网上搜到解决的办法；真正难到痛苦的是后面的几个步骤，因为根本没有找到一个足够详细的教程来解决我的问题，遇到不懂的只能根据log里面的错误信息去官方的文档里找，来回反复改了几十次，总算才把问题都解决了。至于这其中的各种细节，希望我可以在后面的小章节里说清楚。

### 前端 （react）

待更新