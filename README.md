# Personal Website

https://www.kefan.me/

<a href="https://vercel.com/"><img src="https://deploy-badge.vercel.app/vercel/mywebsite-seven-chi?logo=" alt="Vercel Deploy" /></a>
<a href="https://stats.uptimerobot.com/n66xyTGv63"><img src="https://img.shields.io/uptimerobot/status/m787427706-0eab16df7d2eef051f934714?up_message=live&down_message=down&style=flat&label=website" alt="Uptime Robot Status" /></a>
<a href="https://app.codacy.com/gh/k27dong/mywebsite/dashboard"><img src="https://img.shields.io/codacy/grade/2b8bdddeeaca49e7ba41fcca6619ed57?style=flat&logo=codacy" alt="Codacy Grade" /></a>
<a href="https://github.com/k27dong/mywebsite/blob/main/LICENSE"><img src="https://img.shields.io/github/license/k27dong/mywebsite?style=flat" alt="GitHub License" /></a>
<a href="https://kefan.me/rss.xml"><img src="https://img.shields.io/badge/rss-blue?style=flat&logo=rss&logoColor=white&labelColor=grey" alt="RSS Feed" /></a>

## Tech Stack

<table>
  <tr>
    <th align="center">Area</th>
    <th align="center">Technology</th>
  </tr>
  <tr>
    <td align="center"><strong>Frontend</strong></td>
    <td align="center">
      <a href="https://astro.build/">
        <img src="https://img.shields.io/badge/astro-17191e?style=flat&logo=astro&logoColor=ffffff" width="90">
      </a>
    </td>
  </tr>
  <tr>
    <td align="center"><strong>Backend</strong></td>
    <td align="center">
      <a href="https://actix.rs/">
        <img src="https://img.shields.io/badge/actix-65319a?style=flat&logo=actix" width="90">
      </a>
    </td>
  </tr>
  <tr>
    <td align="center"><strong>Deployment</strong></td>
    <td align="center">
      <a href="https://vercel.com/">
        <img src="https://img.shields.io/badge/vercel-white?style=flat&logo=vercel&logoColor=black" width="90">
      </a>
      <br>
      <a href="https://aws.amazon.com/lightsail/">
        <img src="https://img.shields.io/badge/Lightsail-252F3E?style=flat&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIj48cGF0aCBmaWxsPSIjZTE3MTA3IiBkPSJNMjkyLjUgNDA1LjZsLjctMjUuMWMuMS0zLjggMS4xLTkxLjEtODYuMi0xMTMuMi01LjItMS4zLTguOC02LTguOS0xMS4zIDAtNS40IDMuNS0xMC4xIDguNy0xMS41IDg2LjYtMjMuNCA4Ni4zLTExMi4zIDg2LjMtMTEzLjJsLS4zLTIyLjMgMTYuNSAxNWMyLjMgMi4xIDU3LjEgNTIuNyA1OS44IDEyNy4yIDEuNyA0Ny41LTE4LjMgOTMuMy01OS4zIDEzNi4zbC0xNy4zIDE4LjF6bS01OS4zLTE1MGM1NS4xIDIzLjIgNzIgNzIuNiA3Ny4xIDEwMiAyNy41LTM0LjEgNDAuOC02OS41IDM5LjUtMTA1LjctMS41LTQzLjktMjQuMy03OS40LTM5LjctOTguNS01LjMgMjktMjIuMyA3OC4yLTc2LjkgMTAyLjJ6TTg4IDI2NS42SDcwLjljLTUuMyAwLTkuNy00LjMtOS43LTkuNyAwLTUuMyA0LjMtOS43IDkuNy05LjdIODhjNS4zIDAgOS43IDQuMyA5LjcgOS43IDAgNS4zLTQuMyA5LjctOS43IDkuN3ptLTQ4LjEgMEgyMi43Yy01LjMgMC05LjctNC4zLTkuNy05LjcgMC01LjMgNC4zLTkuNyA5LjctOS43aDE3LjJjNS4zIDAgOS43IDQuMyA5LjcgOS43LS4xIDUuMy00LjQgOS43LTkuNyA5Ljd6bTk0LjQgMGgtMjAuNWMtNS4zIDAtOS43LTQuMy05LjctOS43IDAtNS4zIDQuMy05LjcgOS43LTkuN2gyMC41YzUuMyAwIDkuNyA0LjMgOS43IDkuNy0uMSA1LjMtNC40IDkuNy05LjcgOS43em00Mi44IDBoLTE3LjJjLTUuMyAwLTkuNy00LjMtOS43LTkuNyAwLTUuMyA0LjMtOS43IDkuNy05LjdoMTcuMmM1LjMgMCA5LjcgNC4zIDkuNyA5LjcgMCA1LjMtNC4zIDkuNy05LjcgOS43em03Mi4yLTExOC40Yy0xNC41IDAtMjYuMi0xMS43LTI2LjItMjYuMiAwIDE0LjUtMTEuNyAyNi4yLTI2LjIgMjYuMiAxNC41IDAgMjYuMiAxMS43IDI2LjIgMjYuMiAwLTE0LjUgMTEuNy0yNi4yIDI2LjItMjYuMnpNNDQxLjIgMjkzLjhjLTE1LjYgMC0yOC4yLTEyLjYtMjguMi0yOC4yIDAgMTUuNi0xMi42IDI4LjItMjguMiAyOC4yIDE1LjYgMCAyOC4yIDEyLjYgMjguMiAyOC4yIDAtMTUuNiAxMi42LTI4LjIgMjguMi0yOC4yek0yMjMuMSAzNTEuMWMtMjAgMC0zNi4zLTE2LjItMzYuMy0zNi4zIDAgMjAtMTYuMiAzNi4zLTM2LjMgMzYuMyAyMCAwIDM2LjMgMTYuMiAzNi4zIDM2LjMuMS0yMC4xIDE2LjMtMzYuMyAzNi4zLTM2LjN6Ii8%2BPHBhdGggZmlsbD0iI2UxNzEwNyIgZD0iTTI4MC45IDQ1OC43Yy05OS4zIDAtMTgzLjMtNzAuOC0xOTkuOS0xNjguNi0xLTUuOCAyLjktMTEuNCA4LjgtMTIuNCA1LjktLjkgMTEuNCAyLjkgMTIuNCA4LjggMTQuOSA4Ny40IDkwIDE1MC43IDE3OC43IDE1MC43aC43YzQ4LjQtLjIgOTMuOS0xOS4yIDEyOC01My42IDM0LjEtMzQuNCA1Mi44LTgwIDUyLjYtMTI4LjQtLjItNDguNC0xOS4yLTkzLjktNTMuNi0xMjgtMzQuMi0zNC03OS41LTUyLjYtMTI3LjctNTIuNmgtLjdjLTg4LjYuMy0xNjMuNiA2My45LTE3OC4yIDE1MS4yLTEgNS45LTYuNSA5LjgtMTIuNCA4LjhzLTkuOC02LjUtOC44LTEyLjRDOTcuMyAxMjQuNiAxODEuMSA1My41IDI4MC4yIDUzLjFoLjhjNTMuOSAwIDEwNC42IDIwLjkgMTQyLjkgNTguOSAzOC40IDM4LjIgNTkuNyA4OSA1OS45IDE0My4yLjIgNTQuMi0yMC43IDEwNS4yLTU4LjkgMTQzLjYtMzguMiAzOC40LTg5IDU5LjctMTQzLjIgNTkuOWgtLjh6Ii8%2BPC9zdmc%2B&logoSize=20&link=https%3A%2F%2Faws.amazon.com%2Flightsail%2F" width="90">
      </a>
    </td>
  </tr>
</table>

## Features

- **Static Site Generation (SSG) and Server-Side Rendering (SSR):** The website uses a combination of SSG and SSR for optimized performance. All the expensive HTML rendering is moved to build time, reducing load times by serving static files and the least JavaScript possible.

- **Rust-powered Backend:** The backend is entirely written in Rust, offering a highly structured, fast, and reliable architecture with guaranteed memory safety and the capability to handle complex tasks with minimal overhead.

- **Secure Cloud Infrastructure:** Hosted on [AWS Lightsail](https://aws.amazon.com/lightsail/), the backend uses `systemd` and [Infisical](https://infisical.com/) for resilient management. Fronted by [Caddy](https://caddyserver.com/) and [Cloudflare](https://cloudfare.com/), the setup ensures a fast, secure, and globally available environment.

- **Better Font Loading:** Font size has been minimized using `pyftsubset`. The original font, primarily in [Source Han Serif](https://source.typekit.com/source-han-serif/), was reduced from some 50MB to 4MB, resulting the page to load significantly faster.

- **CI/CD with GitHub Actions:** Continuous Integration and Deployment are streamlined using [GitHub Actions](https://github.com/features/actions), enabling a easy edit-build-test-debug-deploy loop for a smooth development process.

- **Separated Deployment:** The frontend and backend are deployed independently and communicate through precise routing, fully supporting dynamic API interactions for scalability and flexibility.

- **Package Management:** The project uses `pnpm` and `cargo` to manage dependencies effectively, reducing disk space usage and maintaining a clean, organized structure. This setup also improves cross-platform compatibility, ensuring smooth operation across different environments.

- **Responsive Design:** The website offers a fully responsive design that adapts seamlessly to different screen sizes using [Tailwind CSS](https://tailwindcss.com/), making the user experience consistent across devices.

- **Real-time Monitoring:** [Uptime Robot](https://uptimerobot.com/) provides real-time status monitoring to ensure the website remains operational and accessible.

## Local Development

The project can be started in two ways: frontend-only for quick UI development or full stack with the API for complete functionality.

1. Running the Frontend Only
   ```bash
   pnpm install
   pnpm run dev
   ```
2. Running the Full Application (Frontend + API)
   ```bash
   pnpm install
   pnpm build
   cargo build --release
   ./target/release/mywebsite
   ```

## Scripts

I've included a few scripts to help with development and maintenance:

- `check_booknote`: Verifies the formatting of booknotes.
- `fix_booknote`: Automatically corrects any formatting issues in booknotes.
- `gen_blogpost`: Generates a new blog post entry, saved as `new.md`.
- `gen_booknote`: Generates a new booknote entry, saved as `new.md`.
- `sync_content`: Synchronizes the `docs/` folder with the `content/` folder used by the frontend.
- `sync_fontbook`: Extract the unique characters used across the site, reads the original font files from the `assets/` folder, generates optimized font subsets, then update the `public/` folder with the new, smaller font files.

To run any of these scripts, use the following command:

```bash
cargo run --bin <script_name>
```

## License

This project is licensed under the [GPL-3.0](https://github.com/k27dong/mywebsite/blob/master/LICENSE) license.
